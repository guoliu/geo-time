<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <div id="map-container">
    <div id="world-map"></div>

    <div id="selector"> 
      <div class="bottom">
        <label class="switch">
          <input type="checkbox", id="nume">
          <span class="switch-on">annual</span>
          <span class="switch-off">cumulative</span>
        </label>
      </div>

      <div class="bottom">
        <label class="switch">
          <input type="checkbox", id="deno">
          <span class="switch-on">area</span>
          <span class="switch-off">population</span>
        </label>
      </div>
    </div>
  </div>

  <div id="time-series"></div>
  

  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="http://d3js.org/queue.v1.js"></script>
  <script src="d3.geo.zoom.js"></script>
  <script src="d3.tip.v0.6.3.js"></script>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="plot2.js"></script>
  <script src="line-graph.js"></script>
  <script>

  // variable set up
  colors =['#313695',
  '#4575b4',
  '#74add1',
  '#abd9e9',
  '#e0f3f8',
  '#ffffbf',
  '#fee090',
  '#fdae61',
  '#f46d43',
  '#d73027',
  '#a50026']

  var width = 800,
  height = 800;

  // handling swicth
  var denoList = ['population', 'area'],
 denoSwitch = -0.5; // start with population
 var numeList = ['cumulative', 'annual'],
 numeSwitch = -0.5;

 var time = Date.now();
 var rotate = [-60,-20];
 var velocity = [.015, -0];

 var projection = d3.geo.orthographic()
 .rotate(rotate)
 .clipAngle(90)
 .scale(200)
 .translate([width / 2, height / 2])
 .precision(.2);

 var path = d3.geo.path()
 .projection(projection);

  // setup svg
  var svg = d3.select("#world-map").append("svg")
  .attr("width", width)
  .attr("height", height);
  var g = svg.append("g")
  .attr("transform", "translate(0,0)");

  // draw grid
  var graticule = d3.geo.graticule();
  g.append("path")
  .datum(graticule)
  .attr("class", "graticule")
  .attr("d", path);
  
  // optimize waiting time
  queue()
  .defer(d3.json, "world-110m2.json")
  .defer(d3.json, "emission.json")
  .await(ready);

  // add zoom and pan effect
  var zoom = d3.geo.zoom()
  .projection(projection)
  .on("zoom.redraw", function() {
    //svg.selectAll("path").attr("d", path);
    g.selectAll("path").attr("transform", "translate(" + d3.event.translate + ")").attr("d", path);
  })
  .scaleExtent([d3.min([width, height])/2, d3.min([width, height])/2]);

  g.call(zoom)
  .on("dblclick.zoom", null)
  .on("wheel.zoom", null);

  d3.select(self.frameElement).style("height", height + "px");

  </script>
</body>
</html>